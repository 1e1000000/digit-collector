<html>
	<head>
		<title>Digit Collector</title>
		<script>
		function update(set,get){
			document.getElementById(set).innerHTML=get
		}

		function showElement(elementID) {
			document.getElementById(elementID).style.display="inline-block"
		}

		function hideElement(elementID) {
			document.getElementById(elementID).style.display="none"
		}

		var tab="digits"

		function switchTab(tabName) {
			hideElement(tab)
			showElement(tabName)
			tab=tabName
		}

		var player = {
			zeroes:10,
			zps:0,
			d0:{
				amount:0,
				cost:10,
				mult:1,
				upgradeCost:1
			},
		pluses:0
		}

		function buyDigit(i) {
			if (player.d0.cost > player.zeroes) return 0; // can't buy!
			player.zeroes -= player.d0.cost;
			player.d0.cost = player.d0.cost*2;
			player.d0.amount = player.d0.amount+1;
			player.zps = player.d0.amount*player.d0.mult;
			update("zeroesDisplay",player.zeroes);
			update("zpsDisplay",player.zps);
			update("d0amountDisplay",player.d0.amount);
			update("d0costDisplay",player.d0.cost);
		}

		function addDigits() {
			showElement("additionTabButton")
			var oldZeroes = player.zeroes; // temporary value for zeroes pre-prestige
			player = {
				zeroes:10,
				zps:0,
				d0:{
					amount:0,
					cost:10,
					mult:player.d0.mult,
					upgradeCost:player.d0.upgradeCost
			},
			pluses:player.pluses+Math.floor(Math.pow(oldZeroes/1000,1/3))
			}
			update("zeroesDisplay",player.zeroes);
			update("zpsDisplay",player.zps);
			update("d0amountDisplay",player.d0.amount);
			update("d0costDisplay",player.d0.cost);
		update("plusesDisplay",player.pluses);
		hideElement("addButton")
		}

		function upgradeDigit(i) {
			if(player.d0.upgradeCost > player.pluses) return 0; // Can't buy
			player.pluses = player.pluses-player.d0.upgradeCost;
			player.d0.mult = player.d0.mult*2;
			player.d0.upgradeCost = player.d0.upgradeCost*2;
			player.zps = player.zps*2;
			update("plusesDisplay",player.pluses);
			update("d0UpgradeCostDisplay",player.d0.upgradeCost);
			update("d0multDisplay",player.d0.mult);
			update("zpsDisplay",player.zps);
		}

		function tick(t) {
			player.zeroes = player.zeroes+player.zps*t;
			update("zeroesDisplay",Math.floor(player.zeroes));
		if(player.zeroes < 1000) hideElement("addButton")
		if(player.zeroes >= 1000) {
			showElement("addButton");
			update("plusesToBeGained",Math.floor(Math.pow(player.zeroes/1000,1/3)));
			}
		}

		function hardReset() {
			if(confirm("Are you sure you want to hard reset? This will erase all your progress!")) {
				player = {
					zeroes:10,
					zps:0,
					d0:{
						amount:0,
						cost:10,
						mult:1,
						upgradeCost:1
					},
				pluses:0
				}
				update("zeroesDisplay",player.zeroes);
				update("zpsDisplay",player.zps);
				update("d0amountDisplay",player.d0.amount);
				update("d0costDisplay",player.d0.cost);
				update("d0multDisplay",player.d0.mult);
				update("d0upgradeCostDisplay",player.d0.upgradeCost);
				update("plusesDisplay",player.pluses);
			hideElement("addButton");
			hideElement("additionTabButton");
			}
		}

			function save() {
			localStorage.setItem('DCSave',btoa(JSON.stringify(player)))
		}

		function load(save) {
			try {
				player=JSON.parse(atob(save))
				
				if(player.zeroes===undefined) player.zeroes = 10;
				if(player.zps===undefined) player.zps = 0;
				if(player.d0.amount===undefined) player.d0.amount = 0;
				if(player.d0.cost===undefined) player.d0.cost = 10;
				if(player.d0.mult===undefined) player.d0.mult = 1;
				if(player.d0.upgradeCost===undefined) player.d0.upgradeCost = 1;
				if(player.pluses===undefined) player.pluses = 0;
				update("zeroesDisplay",player.zeroes);
				update("zpsDisplay",player.zps);
				update("d0amountDisplay",player.d0.amount);
				update("d0costDisplay",player.d0.cost);
				update("d0multDisplay",player.d0.mult);
				update("d0upgradeCostDisplay",player.d0.upgradeCost);
				update("plusesDisplay",player.pluses);
			} catch (e) {
				console.log('Your save failed to load: '+e)
			}
		}

		function exportSave() {
			var savefile=btoa(JSON.stringify(player))
			showElement("exportInfo");
			document.getElementById("exportSave").value=btoa(JSON.stringify(player))
			}

		function importSave() {
			var input=prompt('Paste in your exported save and press enter.')
			load(input);
}

		function init() {
			if(localStorage.getItem('DCSave')!=null) load(localStorage.getItem('DCSave'))
				setInterval(function() {
				tick(0.05)
			}, 50)
			setInterval(save,10000)
		}
		</script>
	</head>
	<body onload="init()">
		<p>You have <div id="zeroesDisplay">10</div> 0s.
		<p>You are getting <div id="zpsDisplay">0</div> 0s per second.
		<button id="addButton" style="display:none" onclick="addDigits()">Add your digits to boost your production.<br>Gain <div id="plusesToBeGained">1</div> +s.</div></button>
		<button id="digitsTabButton" onclick="switchTab('digits')">Digits</button>
		<button id="optionsTabButton" onclick="switchTab('options')">Options</button>
		<button id="additionTabButton" style="display:none" onclick="switchTab('addition')">Addition</button>
		<div id="digits">
			<table>
				<tr id="d0row">
					<td>Digit 0</td>
					<td><div id="d0amountDisplay">0</div></td>
					<td><button id="d0button" onclick="buyDigit(0)">Cost: <div id="d0costDisplay">10</div></button></td>
				</tr>
			</table>
		</div>
		<div id="options" style="display:none">
			<button onclick="save()">Save</button>
			<button onclick="importSave()">import</button>
			<button onclick="exportSave()">Export</button>
			<button onclick="hardReset()">Reset the game</button>
			<span id="exportInfo" style="display:none">Here is your export save:<input id="exportSave"></input></span>
		</div>
		<div style="display:none" id="addition">
			<p>You have <div id="plusesDisplay">0</div> +s.
			<button id="d0UpgradeButton" onclick="upgradeDigit(0)">Double digit 0 production.<br>Current bonus: x<div id="d0multDisplay">1</div>.<br>Cost: <div id="d0UpgradeCostDisplay">1</div> +s.</button>
		</div>
<a href="https://discord.gg/RR2kv5">Discord</a>
	</body>
</html>
