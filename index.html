<html>
	<head>
		<title>Digit Collector</title>
		<script>
		function update(set,get){
			document.getElementById(set).innerHTML=get
		}

		function showElement(elementID) {
			document.getElementById(elementID).style.display=""
		}

		function hideElement(elementID) {
			document.getElementById(elementID).style.display="none"
		}

		var tab="digits"

		function switchTab(tabName) {
			hideElement(tab)
			showElement(tabName)
			tab=tabName
		}

		var player = {
			zeroes:10,
			zps:0,
			d0:{
				amount:0,
				cost:10,
				mult:1,
				upgradeCost:1
			},
		pluses:0
		}

		function buyDigit(i) {
			if (player.d0.cost > player.zeroes) return 0; // can't buy!
			player.zeroes -= player.d0.cost;
			player.d0.cost = player.d0.cost*2;
			player.d0.amount = player.d0.amount+1;
			player.zps = player.d0.amount*player.d0.mult;
			update("0sDisplay",player.zeroes);
			update("d0amountDisplay",player.d0.amount);
			update("d0costDisplay",player.d0.cost);
		}

		function addDigits() {
			var oldZeroes = player.zeroes; // temporary value for zeroes pre-prestige
			player = {
				zeroes:10,
				zps:0,
				d0:{
					amount:0,
					cost:10,
					mult:player.d0.mult,
					upgradeCost:player.d0.upgradeCost
			},
			pluses:player.pluses+Math.floor(Math.pow(oldZeroes/1000,1/3)),
			digitShifts:player.digitShifts,
			hasAdded: true
			}
			update("0sDisplay",player.zeroes);
			update("d0amountDisplay",player.d0.amount);
			update("d0costDisplay",player.d0.cost);
		update("plusesDisplay",player.pluses);
		hideElement("addButton")
		}

		function upgradeDigit(i) {
			if(player.d0.upgradeCost > player.pluses) return 0; // Can't buy
			player.pluses = player.pluses-player.d0.upgradeCost;
			player.d0.mult = player.d0.mult*2;
			player.d0.upgradeCost = player.d0.upgradeCost*2;
			player.zps = player.zps*2;
			update("plusesDisplay",player.pluses);
			update("d0UpgradeCostDisplay",player.d0.upgradeCost);
			update("d0multDisplay",player.d0.mult);
			update("zpsDisplay",player.zps);
		}

		function tick(t) {
			player.zeroes = player.zeroes+player.zps*t;
			update("0sDisplay",Math.floor(player.zeroes));
		if(player.zeroes < 1000) hideElement("addButton")
		if(player.zeroes >= 1000) {
			showElement("addButton");
			update("plusesToBeGained",Math.floor(Math.pow(player.zeroes/1000,1/3)));
			}
			
			if(player.hasAdded) showElement("additionTabButton")
			for(var i = 0; i < 10; i++) hideElement("d" + i + "row")
			if(player.digitShifts === "undefined") player.digitShifts = 0
			for(var i = 0; i < (player.digitShifts||0)+1; i++) showElement("d" + i + "row")
		}

		function hardReset() {
			if(confirm("Are you sure you want to hard reset? This will erase all your progress!")) {
				player = {
					zeroes:10,
					zps:0,
					d0:{
						amount:0,
						cost:10,
						mult:1,
						upgradeCost:1,
					},
				pluses:0,
				digitShifts:0
				}
				update("0sDisplay",player.zeroes);
				update("d0amountDisplay",player.d0.amount);
				update("d0costDisplay",player.d0.cost);
				update("d0multDisplay",player.d0.mult);
				update("d0upgradeCostDisplay",player.d0.upgradeCost);
				update("plusesDisplay",player.pluses);
				hideElement("addButton");
				hideElement("additionTabButton");
			}
		}

			function save() {
			localStorage.setItem('DCSave',btoa(JSON.stringify(player)))
		}

		function load(save) {
			try {
				player=JSON.parse(atob(save))
				
				if(player.zeroes===undefined) player.zeroes = 10;
				if(player.zps===undefined) player.zps = 0;
				if(player.d0.amount===undefined) player.d0.amount = 0;
				if(player.d0.cost===undefined) player.d0.cost = 10;
				if(player.d0.mult===undefined) player.d0.mult = 1;
				if(player.d0.upgradeCost===undefined) player.d0.upgradeCost = 1;
				if(player.pluses===undefined) player.pluses = 0;
				update("0sDisplay",player.zeroes);
				update("d0amountDisplay",player.d0.amount);
				update("d0costDisplay",player.d0.cost);
				update("d0multDisplay",player.d0.mult);
				update("d0UpgradeCostDisplay",player.d0.upgradeCost);
				update("plusesDisplay",player.pluses);
			} catch (e) {
				console.log('Your save failed to load: '+e)
			}
		}

		function exportSave() {
			var savefile=btoa(JSON.stringify(player))
			showElement("exportInfo");
			document.getElementById("exportSave").value=btoa(JSON.stringify(player))
			}

		function importSave() {
			var input=prompt('Paste in your exported save and press enter.')
			load(input);
}

		function init() {
			if(localStorage.getItem('DCSave')!=null) load(localStorage.getItem('DCSave'))
				setInterval(function() {
				tick(0.05)
			}, 50)
			setInterval(save,10000)
		}
		</script>
	</head>
	<body onload="init()">
		<div id = "header">
			<button id="digitsTabButton" onclick="switchTab('digits')">Digits</button>
			<button id="optionsTabButton" onclick="switchTab('options')">Options</button>
			<button id="additionTabButton" style="display:none" onclick="switchTab('addition')">Addition</button>
		</div>
		<div id = "prestige">
			<button id="addButton" style="display:none" onclick="addDigits()">Add your digits to boost your production.<br>Gain <span id="plusesToBeGained">1</span> pluses.</div></button>
		</div>
		<div id="digits">
			<table>
				<tr>
					<th>Number</th>
					<th>Amount of number</th>
					<th>Amount of digit</th>
					<th>Cost of next digit</th>
				</tr>
				<tr id="d0row">
					<td>0</td>
					<td><div id="0sDisplay">10</div></td>
					<td><div id="d0amountDisplay">0</div></td>
					<td><button id="d0button" onclick="buyDigit(0)">Cost: <span id="d0costDisplay">10</span></button></td>
				</tr>
				<tr id="d1row">
					<td>1</td>
					<td><div id="1sDisplay">10</div></td>
					<td><div id="d1amountDisplay">0</div></td>
					<td><button id="d1button" onclick="buyDigit(1)">Cost: <span id="d1costDisplay">10</span></button></td>
				</tr>
				<tr id="d2row">
					<td>2</td>
					<td><div id="2sDisplay">10</div></td>
					<td><div id="d2amountDisplay">0</div></td>
					<td><button id="d2button" onclick="buyDigit(2)">Cost: <span id="d2costDisplay">10</span></button></td>
				</tr>
				<tr id="d3row">
					<td>3</td>
					<td><div id="3sDisplay">10</div></td>
					<td><div id="d3amountDisplay">0</div></td>
					<td><button id="d3button" onclick="buyDigit(3)">Cost: <span id="d3costDisplay">10</span></button></td>
				</tr>
				<tr id="d4row">
					<td>4</td>
					<td><div id="4sDisplay">10</div></td>
					<td><div id="d4amountDisplay">0</div></td>
					<td><button id="d4button" onclick="buyDigit(4)">Cost: <span id="d4costDisplay">10</span></button></td>
				</tr>
				<tr id="d5row">
					<td>5</td>
					<td><div id="5sDisplay">10</div></td>
					<td><div id="d5amountDisplay">0</div></td>
					<td><button id="d5button" onclick="buyDigit(5)">Cost: <span id="d5costDisplay">10</span></button></td>
				</tr>
				<tr id="d6row">
					<td>6</td>
					<td><div id="6sDisplay">10</div></td>
					<td><div id="d6amountDisplay">0</div></td>
					<td><button id="d6button" onclick="buyDigit(6)">Cost: <span id="d6costDisplay">10</span></button></td>
				</tr>
				<tr id="d7row">
					<td>7</td>
					<td><div id="7sDisplay">10</div></td>
					<td><div id="d7amountDisplay">0</div></td>
					<td><button id="d7button" onclick="buyDigit(7)">Cost: <span id="d7costDisplay">10</span></button></td>
				</tr>
				<tr id="d8row">
					<td>8</td>
					<td><div id="8sDisplay">10</div></td>
					<td><div id="d8amountDisplay">0</div></td>
					<td><button id="d8button" onclick="buyDigit(8)">Cost: <span id="d8costDisplay">10</span></button></td>
				</tr>
				<tr id="d9row">
					<td>9</td>
					<td><div id="9sDisplay">10</div></td>
					<td><div id="d9amountDisplay">0</div></td>
					<td><button id="d9button" onclick="buyDigit(9)">Cost: <span id="d9costDisplay">10</span></button></td>
				</tr>
			</table>
		</div>
		<div id="options" style="display:none">
			<button onclick="save()">Save</button>
			<button onclick="importSave()">Import</button>
			<button onclick="exportSave()">Export</button>
			<button onclick="hardReset()">Reset the game</button><br>
			<span id="exportInfo" style="display:none">Here is your export save:<input id="exportSave"></input></span>
		</div>
		<div style="display:none" id="addition">
			<p>You have <span id="plusesDisplay">0</span> pluses.<br>
			<table>
				<tr>
					<button id="d0UpgradeButton" onclick="upgradeDigit(0)">Double digit 0 production.<br>Current bonus: x<span id="d0multDisplay">1</span>.<br>Cost: <span id="d0UpgradeCostDisplay">1</span> pluses.</button>
					<button id="d1UpgradeButton" onclick="upgradeDigit(1)">Double digit 1 production.<br>Current bonus: x<span id="d1multDisplay">0.5</span>.<br>Cost: <span id="d1UpgradeCostDisplay">4</span> pluses.</button>
					<button id="d2UpgradeButton" onclick="upgradeDigit(2)">Double digit 2 production.<br>Current bonus: x<span id="d2multDisplay">0.25</span>.<br>Cost: <span id="d2UpgradeCostDisplay">4</span> pluses.</button>
					<button id="d3UpgradeButton" onclick="upgradeDigit(3)">Double digit 3 production.<br>Current bonus: x<span id="d3multDisplay">0.125</span>.<br>Cost: <span id="d3UpgradeCostDisplay">4</span> pluses.</button>
					<button id="d4UpgradeButton" onclick="upgradeDigit(4)">Double digit 4 production.<br>Current bonus: x<span id="d4multDisplay">0.063</span>.<br>Cost: <span id="d4UpgradeCostDisplay">4</span> pluses.</button>
					<button id="d5UpgradeButton" onclick="upgradeDigit(5)">Double digit 5 production.<br>Current bonus: x<span id="d5multDisplay">0.031</span>.<br>Cost: <span id="d5UpgradeCostDisplay">4</span> pluses.</button>
					<button id="d6UpgradeButton" onclick="upgradeDigit(6)">Double digit 6 production.<br>Current bonus: x<span id="d6multDisplay">0.016</span>.<br>Cost: <span id="d6UpgradeCostDisplay">4</span> pluses.</button>
					<button id="d7UpgradeButton" onclick="upgradeDigit(7)">Double digit 7 production.<br>Current bonus: x<span id="d7multDisplay">0.008</span>.<br>Cost: <span id="d7UpgradeCostDisplay">4</span> pluses.</button>
					<button id="d8UpgradeButton" onclick="upgradeDigit(8)">Double digit 8 production.<br>Current bonus: x<span id="d8multDisplay">0.004</span>.<br>Cost: <span id="d8UpgradeCostDisplay">4</span> pluses.</button>
					<button id="d9UpgradeButton" onclick="upgradeDigit(9)">Double digit 9 production.<br>Current bonus: x<span id="d9multDisplay">0.002</span>.<br>Cost: <span id="d9UpgradeCostDisplay">4</span> pluses.</button>
				</tr>
			</table>
			<p>You have done <div id="digitShiftsDisplay">0</div> digit shifts.<br>
			<button id="digitShiftButton" onclick="digitShift()">Unlock digit <span id="nextDigitDisplay">1</span>.<br>Cost: <span id="digitShiftCostDisplay">4</span> pluses.</button>
		</div>
<br><a href="https://discord.gg/RR2kv5">Discord</a>
	</body>
</html>
